(function(a){a.extend({modalconfirm:new function(){this.defaults={confirmBtnID:"mc_conf",denyBtnID:"mc_deny",doCheck:null,onCheckFail:null,onConfirm:null,onDeny:null,overlayID:"mc_overlay",popupID:null,preShow:null};this.construct=function(d){var e=a.extend({},a.modalconfirm.defaults,d||{});this.each(function(){a(this).bind("click.mc_confirm",e,b)});return this};function b(i){var f=i.data;var e=i.target;if(!a.isFunction(f.doCheck)||f.doCheck.call()){i.stopPropagation();i.preventDefault();var h=a("#"+f.overlayID);h.css({display:"block"});var d=(f.popupID)?a("#"+f.popupID):h.children(":first");d.find("#"+f.confirmBtnID).click(function(n){n.stopImmediatePropagation();c(h,d);var m;if(a.isFunction(f.onConfirm)){m=f.onConfirm.call(e)}else{m=(f.onConfirm===null||f.onConfirm!==false)}if(m){a(e).unbind("click.mc_confirm").trigger("click");a(e).bind("click.mc_confirm",f,b)}});d.find("#"+f.denyBtnID).click(function(m){m.stopImmediatePropagation();c(h,d);a.isFunction(f.onDeny)&&f.onDeny.call(e)});if(a.isFunction(f.preShow)){f.preShow.call(e,d)}var g=d.height();var k=d.width();var l=-d.outerHeight()/2;var j=-d.outerWidth()/2;d.css({"margin-top":l+"px","margin-left":j+"px",height:g+"px",width:k+"px",display:"block"})}else{if(f.onCheckFail){if(a.isFunction(f.onCheckFail)){if(!f.onCheckFail.call(e)){i.stopImmediatePropagation()}}else{if(a.isFunction(f.onConfirm)){if(!f.onConfirm.call(e)){i.stopImmediatePropagation()}}else{if(f.onConfirm===false){i.stopImmediatePropagation()}}}}else{if(a.isFunction(f.onDeny)){f.onDeny.call(e)}}}}function c(e,d){d.css({display:"none"});e.css({display:"none"})}}});a.fn.extend({modalconfirm:a.modalconfirm.construct})})(jQuery);